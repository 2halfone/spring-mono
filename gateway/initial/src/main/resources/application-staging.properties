# Port of the gateway
server.port=8080

# ===== SECURITY GATEWAY CONFIGURATION =====
# Global Default Filters applied to ALL routes
spring.cloud.gateway.default-filters[0]=JwtAuthentication

# Route to auth-service: intercetta /auth/** e inoltra
spring.cloud.gateway.routes[0].id=auth
spring.cloud.gateway.routes[0].predicates[0]=Path=/auth/**
spring.cloud.gateway.routes[0].uri=http://auth-service:8080
# Apply JWT filter to auth routes (will skip public endpoints internally)
spring.cloud.gateway.routes[0].filters[0]=JwtAuthentication

# Route to chat-service: intercetta /chat/** e inoltra  
spring.cloud.gateway.routes[1].id=chat
spring.cloud.gateway.routes[1].predicates[0]=Path=/chat/**
spring.cloud.gateway.routes[1].uri=http://chat-service:8080
# Apply JWT filter to chat routes (all chat endpoints require auth)
spring.cloud.gateway.routes[1].filters[0]=JwtAuthentication

# Route for any other service (future-proof)
spring.cloud.gateway.routes[2].id=api
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/**
spring.cloud.gateway.routes[2].uri=lb://api-service
spring.cloud.gateway.routes[2].filters[0]=JwtAuthentication

# Health check route (public, no JWT required)
spring.cloud.gateway.routes[3].id=health
spring.cloud.gateway.routes[3].predicates[0]=Path=/actuator/health
spring.cloud.gateway.routes[3].uri=http://localhost:8080
